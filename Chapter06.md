# ðŸ“š Chapter 06. DI(Dependency Injection)ì™€ ì„œë¹„ìŠ¤ ë¡œì¼€ì´í„°
## ì–´í”Œë¦¬ì¼€ì´ì…˜ ì˜ì—­ì™€ ë©”ì¸ ì˜ì—­
- ì–´í”Œë¦¬ì¼€ì´ì…˜ ì˜ì—­: ê³ ìˆ˜ì¤€ ì •ì±… ë° ì €ìˆ˜ì¤€ êµ¬í˜„ì„ í¬í•¨í•œ ì˜ì—­(ì¸í„°íŽ˜ì´ìŠ¤ì™€ ì½˜í¬ë¦¬íŠ¸ í´ëž˜ìŠ¤ ë“±)
- ë©”ì¸ ì˜ì—­: `fun main()`ì— ì†í•œ ì˜ì—­

### Locatorë¥¼ ì•Œì•„ë³´ìž
- ì„¤ê³„ë„ë¥¼ ë³´ë©´ ì¶”ìƒ íƒ€ìž…ê³¼ ì½˜í¬ë¦¬íŠ¸ í´ëž˜ìŠ¤ë¥¼ í™œìš©í•¨ -> ê°œë°© íì‡„ ì›ì¹™ + ì˜ì¡´ ì—­ì „ ì›ì¹™
- ê·¼ë° ì–´ë””ì„œ ì½˜í¬ë¦¬íŠ¸ í´ëž˜ìŠ¤ë¥¼ ìƒì„±í•˜ì§€??

> Locator ì‚¬ìš© ì „ ì½”ë“œ êµ¬ì„±  
![locatorì‚¬ìš©ì „](https://user-images.githubusercontent.com/95393311/155847421-3a1ebfc6-5f65-46e9-a43b-b4c14467fb01.JPG)

- Locator ì‚¬ìš© ì „
  - ì½˜í¬ë¦¬íŠ¸ í´ëž˜ìŠ¤ë¥¼ ì§ì ‘ ìƒì„± ë° ì„¤ì •í•´ì•¼ í•œë‹¤.

> Locator ì‚¬ìš© í›„ + Locator ì½”ë“œ êµ¬ì„± + ì„¤ê³„ë„  
![locatorì‚¬ìš©í›„](https://user-images.githubusercontent.com/95393311/155847425-c4317ef9-6127-474e-b1b2-7101edee1822.JPG)
![locatorì½”ë“œêµ¬ì„±](https://user-images.githubusercontent.com/95393311/155847430-acd26485-925a-44db-ad0a-bdbf41ce6d54.JPG)

- Locator ì‚¬ìš© í›„ + Locator ì½”ë“œ êµ¬ì„± + ì„¤ê³„ë„
    - Locatorë¥¼ í†µí•´ ì½˜í¬ë¦¬íŠ¸ í´ëž˜ìŠ¤ë¥¼ ìƒì„± ë° ì„¤ì •í•œë‹¤.
    - Locatorë¥¼ ê°™ì€ íŒ¨í‚¤ì§€ì— ë„£ì§€ ì•Šì„ ê²½ìš°, ìˆœí™˜ ì˜ì¡´ì´ ë°œìƒí•˜ê²Œ ëœë‹¤
      (Work(transcoder íŒ¨í‚¤ì§€) -> Locator(locator íŒ¨í‚¤ì§€) -> JobQueue + TransCorder (transcoder íŒ¨í‚¤ì§€) 
    

### ë©”ì¸ ì˜ì—­ì˜ ì—­í• 
- ì–´í”Œë¦¬ì¼€ì´ì…˜ ì˜ì—­ì—ì„œ ì‚¬ìš©ë  ê°ì²´ë¥¼ ìƒì„±í•œë‹¤
- ê° ê°ì²´ ê°„ì˜ ì˜ì¡´ ê´€ê³„ë¥¼ ì„¤ì •í•œë‹¤.
- ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•œë‹¤.

> ì–´í”Œë¦¬ì¼€ì´ì…˜ ì˜ì—­ì˜ ê°ì²´ë¥¼ `ìƒì„±`, `ì„¤ì •` í•˜ê³  `ì‹¤í–‰`í•˜ëŠ” ì±…ìž„ì„ ê°€ì§

### ë©”ì¸ ì˜ì—­ì˜ ì½”ë“œ êµ¬ì„±
> ë©”ì¸ ì˜ì—­ì˜ ì½”ë“œ êµ¬ì„±  
![ë©”ì¸ì˜ì—­](https://user-images.githubusercontent.com/95393311/155847444-c7fecd1f-4480-4c4b-b870-5d1cc27e5bdb.JPG)

#### ìž¥ì 
- ê°ê° ë‹¤ë¥¸ ì½˜í¬ë¦¬íŠ¸ í´ëž˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì˜ì—­ì€ ìˆ˜ì •í•  í•„ìš” ì—†ì´ ë©”ì¸ ì˜ì—­ì—ì„œë§Œ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ë©´ ëœë‹¤
- ëª¨ë“  ì˜ì¡´ì€ ë©”ì¸ ì˜ì—­ -> ì–´í”Œë¦¬ì¼€ì´ì…˜ ì˜ì—­ì´ë‹¤
  - ì¦‰, ë©”ì¸ ì˜ì—­ì„ ìˆ˜ì •í•´ë„ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì˜ì—­ì—ëŠ” ì˜í–¥ì´ ë¯¸ì¹˜ì§€ ì•ŠëŠ”ë‹¤.

> ì´ì²˜ëŸ¼ ì‚¬ìš©í•  ê°ì²´ë¥¼ ì œê³µí•˜ëŠ” ì±…ìž„ì„ ê°–ëŠ” ê°ì²´ë¥¼ ì„œë¹„ìŠ¤ ë¡œì¼€ì´í„°(Service Locator)ë¼ í•œë‹¤

## DIë¥¼ ì´ìš©í•œ ì˜ì¡´ ê°ì²´ ì‚¬ìš©
- ì‚¬ìš©í•  ê°ì²´ë¥¼ ì§ì ‘ ìƒì„±í•˜ê²Œ ë˜ë©´ ì½˜í¬ë¦¬íŠ¸ í´ëž˜ìŠ¤ì— ëŒ€í•œ ì˜ì¡´ì´ ë°œìƒ
  - ì´ëŠ” ì˜ì¡´ ì—­ì „ + ê°œë°© íì‡„ ì›ì¹™ ìœ„ë°˜
  - ìœ ì—°í•˜ì§€ ëª»í•œ ì½”ë“œ êµ¬ì„±ìž„
```
class Worker {

    fun run() {
        val jobQueue: JobQueue = JobQueue í´ëž˜ìŠ¤ì˜ ì½˜í¬ë¦¬íŠ¸ í´ëž˜ìŠ¤ ì¤‘ í•˜ë‚˜ // JobQueueë¥¼ êµ¬í•œë‹¤

}
```

- ì´ë¥¼ í•´ê²°í•  ë°©ì•ˆìœ¼ë¡œ ì„œë¹„ìŠ¤ ë¡œì¼€ì´í„°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìžˆëŠ”ë°, ì„œë¹„ìŠ¤ ë¡œì¼€ì´í„°ì˜ ê²½ìš°ì—ë„ ëª‡ ê°€ì§€ ë‹¨ì ì´ ìžˆìŒ (ì´ ë¶€ë¶„ì€ ì´í›„ì— ì„¤ëª…)
- ìœ„ì—ì„œ ë§í•œ ë‹¨ì ë“¤ì„ ê·¹ë³µí•˜ê³  ë³´ì™„í•˜ëŠ” ë°©ë²•ì´ DI (Dependency Injection: ì˜ì¡´ ì£¼ìž…)
## DI ì‚¬ìš©í•˜ëŠ” ë°©ë²•
> ìƒì„±ìžë¥¼ í†µí•œ ì˜ì¡´ì„± ì£¼ìž…  
![DI_ìƒì„±ìž](https://user-images.githubusercontent.com/95393311/155847456-5801365a-b567-4541-b838-60c361c2f641.JPG)

- ê°„ë‹¨í•˜ê²Œ ìƒì„±ìžë¥¼ í†µí•´ ì‚¬ìš©í•  ê°ì²´ë¥¼ ì „ë‹¬ë°›ì„ ìˆ˜ ìžˆë‹¤
- ê° êµ¬í˜„ í´ëž˜ìŠ¤ëŠ” Worker ê°ì²´ë‚˜ JobCLI ê°ì²´ì—ì„œ ì°¾ê±°ë‚˜ ìƒì„±í•˜ì§€ ì•Šê³ , ë©”ì¸ ì˜ì—­ì—ì„œ ìƒì„±ìžë¥¼ í†µí•´ ì£¼ìž…í•˜ê³  ìžˆë‹¤.
- ì´ì²˜ëŸ¼ ëˆ„êµ°ê°€ ì™¸ë¶€ì—ì„œ ì˜ì¡´í•˜ëŠ” ê°ì²´ë¥¼ ë„£ì–´ì£¼ê¸° ë•Œë¬¸ì— ì˜ì¡´(dependency) ì£¼ìž…(injection)ì´ë¼ ë¶€ë¥¸ë‹¤

### main()ì´ ì•„ë‹ˆë¼ ì¡°ë¦½ ì—­í•  í•˜ëŠ” í´ëž˜ìŠ¤ ë¶„ë¦¬

> ì¡°ë¦½ê¸° í´ëž˜ìŠ¤ë¥¼ ë¶„ë¦¬í•œ í›„, ì¡°ë¦½ê¸° í´ëž˜ìŠ¤ ì½”ë“œ êµ¬ì„±ê³¼ main() ì½”ë“œ  
![DI_ìƒì„±ìž_ì¡°ë¦½ê¸°](https://user-images.githubusercontent.com/95393311/155847532-fddc7323-675d-412f-ba70-dd08507ca33c.JPG)
- DIë¥¼ í†µí•´ì„œ ì˜ì¡´ ê°ì²´ë¥¼ ê´€ë¦¬í•  ë•ŒëŠ” ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì´ë¥¼ ì˜ì¡´ ê´€ê³„ì— ë”°ë¼ ì—°ê²°í•´ ì£¼ëŠ” ì¡°ë¦½ ê¸°ëŠ¥ì´ í•„ìš”
- main() í•¨ìˆ˜ì˜ ì¡°ë¦½ ê¸°ëŠ¥ì„ ì¡°ë¦½ê¸° í´ëž˜ìŠ¤ë¡œ ë¶„ë¦¬í•´ì„œ, ì¡°ë¦½ê¸° êµ¬í˜„ ë³€ê²½ì˜ ìœ ì—°í•¨ì„ ì–»ì„ ìˆ˜ ìžˆë‹¤.
  - Assemble í´ëž˜ìŠ¤ë¥¼ í†µí•´ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì˜ì—­ì—ì„œ ì‚¬ìš©í•  ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ìƒì„±ìžë¥¼ í†µí•´ ì˜ì¡´ ê°ì²´ë¥¼ ì „ë‹¬
  - main() í•¨ìˆ˜ëŠ” Assmebleì—ê²Œ ê°ì²´ ìƒì„±ê³¼ ì¡°ë¦½ ì±…ìž„ì„ ìœ„ìž„
- ìŠ¤í”„ë§ í”„ë ˆìž„ì›Œí¬ê°€ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì¡°ë¦½ í•´ì£¼ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ëŒ€í‘œì ì¸ DI í”„ë ˆìž„ì›Œí¬


## DI ë°©ì‹
1. ìƒì„±ìž ë°©ì‹
2. ì„¤ì • ë©”ì„œë“œ ë°©ì‹

### ì„¤ì • ë©”ì„œë“œ ë°©ì‹
> ì„¤ì • ë©”ì„œë“œ ë°©ì‹ì˜ êµ¬í˜„  
![DI_ì„¤ì •ë©”ì„œë“œ](https://user-images.githubusercontent.com/95393311/155847473-f8821a95-8651-4b4a-abb1-8398579db95d.JPG)


> ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ ì„¤ì • ë©”ì„œë“œ êµ¬í˜„  
![ë‹¤ì–‘í•œì„¤ì •ë©”ì„œë“œ](https://user-images.githubusercontent.com/95393311/155847478-2875b2bd-76c2-4dcd-8c9b-f1979418245f.JPG)

## ê° ë°©ì‹ì˜ ìž¥ë‹¨ì 
1. ìƒì„±ìž ë°©ì‹
   - ì €ìžê°€ ì„ í˜¸í•˜ëŠ” ë°©ì‹
   - ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ì‹œì ì— ì˜ì¡´ ê°ì²´ê°€ ì •ìƒì¸ì§€ í™•ì¸í•  ìˆ˜ ìžˆë‹¤. (ì˜ˆì™¸ ì²˜ë¦¬ê°€ ìˆ˜ì›”í•´ì§)
     - ì¦‰, ì˜ˆì™¸ì—†ì´ ê°ì²´ê°€ ìƒì„±ë˜ë©´ ì •ìƒì ìœ¼ë¡œ ë™ìž‘í•¨ì„ ë³´ìž¥í•  ìˆ˜ ìžˆê²Œ ëœë‹¤.
   - Immutable ê°€ëŠ¥ (val)
     - ì„¤ì • ë©”ì„œë“œ ë°©ì‹ì€ ì„¤ì • ë©”ì„œë“œë¥¼ ì¨ì„œ ì˜ì¡´ ê°ì²´ë¥¼ ìƒì„±í•˜ê¸° ë•Œë¬¸ì— mutable íƒ€ìž…ì´ì–´ì•¼ í•œë‹¤ (var) 

2. ì„¤ì • ë©”ì„œë“œ ë°©ì‹
   - ì–´ë–¤ ì´ìœ ë¡œ ì˜ì¡´í•  ê°ì²´ë¥¼ ë‚˜ì¤‘ì— ìƒì„±í•´ì•¼ í•œë‹¤ë©´ ì„¤ì • ë©”ì„œë“œ ë°©ì‹ì´ ìœ ìš©
   - ì˜ì¡´ ê°ì²´ê°€ ë§Žì„ ê²½ìš°, ë©”ì„œë“œ ì´ë¦„ì„ í†µí•´ ì–´ë–¤ ì˜ì¡´ ê°ì²´ë¥¼ ì„¤ì •í•˜ê³  ìžˆëŠ”ì§€ íŒŒì•…í•  ìˆ˜ ìžˆì–´ ê°€ë…ì„±ì´ ë†’ìŒ

## DIì™€ í…ŒìŠ¤íŠ¸
- ì¶”ìƒ íƒ€ìž…ì„ í™œìš©í–ˆê¸° ë•Œë¬¸ì— ì½˜í¬ë¦¬íŠ¸ í´ëž˜ìŠ¤ê°€ ì—†ë”ë¼ë„ í…ŒìŠ¤íŠ¸ê°€ ê°€ëŠ¥í•˜ë‹¤
  - DI íŒ¨í„´ì„ ì‚¬ìš©í•˜ë©´ Mock ê°ì²´ë¥¼ ì‰½ê²Œ ì „ë‹¬í•  ìˆ˜ ìžˆë‹¤.
- DI íŒ¨í„´ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´?
  - í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•´ ì¶”ìƒ íƒ€ìž…ì˜ í´ëž˜ìŠ¤ê°€ Mock ê°ì²´ë¥¼ ë°˜í™˜í•˜ë„ë¡ ì½”ë“œë¥¼ ìˆ˜ì •í•´ì•¼ í•¨
  - í…ŒìŠ¤íŠ¸ê°€ ëë‚˜ë©´ ì´ë¥¼ ë‹¤ì‹œ ë°˜í™˜ê°’ì„ ì¶”ìƒ íƒ€ìž…ìœ¼ë¡œ ë³€ê²½í•´ì•¼ í•¨


#### ìŠ¤í”„ë§ í”„ë ˆìž„ì›Œí¬ ì˜ˆ

## ì„œë¹„ìŠ¤ ë¡œì¼€ì´í„°ë¥¼ ì´ìš©í•œ ì˜ì¡´ ê°ì²´ ì‚¬ìš©
- ì„œë¹„ìŠ¤ ë¡œì¼€ì´í„°ëŠ” ë©”ì¸ ì˜ì—­ì´ ì•„ë‹ˆë¼ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì˜ì—­ì— ì§ì ‘ ì ‘ê·¼
- ë©”ì¸ ì˜ì—­ì—ì„œëŠ” ì„œë¹„ìŠ¤ ë¡œì¼€ì´í„°ë¥¼ ìƒì„±í•˜í•˜ê³  ì´ ê°ì²´ë¡œ ì´ˆê¸°í™”ë¥¼ ì§„í–‰

## ì„œë¹„ìŠ¤ ë¡œì¼€ì´í„° êµ¬í˜„ ë°©ì‹

> ê°ì²´ ë“±ë¡ ë°©ì‹  
![ê°ì²´ë“±ë¡ë°©ì‹](https://user-images.githubusercontent.com/95393311/155847488-3937ba15-5ff0-450d-ba33-3cc7643576e0.JPG)  

### ê°ì²´ ë“±ë¡ ë°©ì‹ì„ í†µí•œ êµ¬í˜„
1. ì„œë¹„ìŠ¤ ë¡œì¼€ì´í„°ë¥¼ ìƒì„±í•  ë•Œ ì‚¬ìš©í•  ê°ì²´ë¥¼ ì „ë‹¬
2. ì„œë¹„ìŠ¤ ë¡œì¼€ì´í„° ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì§€ì •í•˜ê³  ì°¸ì¡°í•˜ê¸° ìœ„í•œ static (companion object) ë©”ì„œë“œë¥¼ ì œê³µ (ì´ê±¸ í•˜ì§€ ì•Šìœ¼ë©´ ë©”ì¸ ì˜ì—­ì— ë¡œì¼€ì´í„°ë¥¼ ë“±ë¡í•  ìˆ˜ ì—†ìŒ -> ì˜ì¡´ ì—­ì „ê³¼ ê°œë°© íì‡„ ì›ì¹™ ìœ„ë°˜)
3. ì´ ë°©ì‹ì€ ì„œë¹„ìŠ¤ ë¡œì¼€ì´í„° êµ¬í˜„ì´ ì‰½ë‹¤ëŠ” ìž¥ì ì´ ìžˆë‹¤
4. í•˜ì§€ë§Œ ì´ ë°©ë²•ì€ ì¸í„°íŽ˜ì´ìŠ¤ê°€ ë…¸ì¶œë˜ì–´ ìžˆê¸° ë•Œë¬¸ì— ì–´í”Œë¦¬ì¼€ì´ì…˜ ì˜ì—­ì—ì„œ ì˜ì¡´ ê°ì²´ë¥¼ ë°”ê¿€ ìˆ˜ ìžˆë‹¤.


### ìƒì†ì„ í†µí•œ êµ¬í˜„
1. ê°ì²´ë¥¼ êµ¬í•˜ëŠ” ì¶”ìƒ ë©”ì„œë“œë¥¼ ì œê³µí•˜ëŠ” ìƒìœ„ íƒ€ìž… êµ¬í˜„
2. ìƒìœ„ íƒ€ìž…ì„ ìƒì†ë°›ì€ í•˜ìœ„ íƒ€ìž…ì—ì„œ ì‚¬ìš©í•  ê°ì²´ ì„¤ì •

### ì§€ë„¤ë¦­/í…œí”Œë¦¿ì„ ì´ìš©í•œ êµ¬í˜„
1. ì„œë¹„ìŠ¤ ë¡œì¼€ì´í„°ì˜ ë‹¨ì ì€ ì¸í„°íŽ˜ì´ìŠ¤ ë¶„ë¦¬ ì›ì¹™ì„ ìœ„ë°˜í•œë‹¤ëŠ” ì 
2. í•˜ì§€ë§Œ ì œë„¤ë¦­ íƒ€ìž…ì„ í™œìš©í•´ì„œ ì–´ëŠ ì •ë„ ì¸í„°íŽ˜ì´ìŠ¤ ë¶„ë¦¬ ì›ì¹™ì„ ì§€í‚¤ëŠ” íš¨ê³¼ë¥¼ ë³¼ ìˆ˜ ìžˆìŒ

## ì„œë¹„ìŠ¤ ë¡œì¼€ì´í„°ì˜ ë‹¨ì 
1. ë™ì¼ íƒ€ìž…ì˜ ê°ì²´ê°€ ë‹¤ìˆ˜ í•„ìš”í•  ê²½ìš°, ê° ê°ì²´ ë³„ë¡œ ì œê³µ ë©”ì„œë“œë¥¼ ë§Œë“¤ì–´ ì£¼ì–´ì•¼ í•¨
2. ì¸í„°íŽ˜ì´ìŠ¤ ë¶„ë¦¬ ì›ì¹™ì„ ìœ„ë°˜

> ê²°ë¡  ì„œë¹„ìŠ¤ ë¡œì¼€ì´í„° ë³´ë‹¤ëŠ” DIë¥¼ ì‚¬ìš©í•˜ìž

## ì¶”ê°€ í•™ìŠµ ê±°ë¦¬
- ì•ˆë“œë¡œì´ë“œ í”„ë ˆìž„ì›Œí¬ëŠ” DIë¥¼ ì œê³µí•˜ì§€ ì•ŠëŠ”ë‹¤?!
> ì•ˆë“œë¡œì´ë“œ ê³µì‹ë¬¸ì„œëŠ” DIì— ëŒ€í•œ ì •ë³´ë¥¼ ì œê³µí•˜ê³  ìžˆë‹¤.
> [Androidì˜ ì¢…ì† í•­ëª© ì‚½ìž…](https://developer.android.com/training/dependency-injection)
> ë˜í•œ, `Dagger` ë¼ëŠ” DIë¥¼ ì œê³µí•˜ëŠ” í”„ë ˆìž„ì›Œí¬ë„ ì œê³µí•œë‹¤
> [Dagger](https://developer.android.com/training/dependency-injection/dagger-basics)